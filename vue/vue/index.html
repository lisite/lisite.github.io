<!DOCTYPE HTML><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="Study hard, day day up!"><meta name="author" content="å¤§è¥¿ç“œ"><meta name="generator" content="Hugo 0.66.0"><title>å¤§è¥¿ç“œğŸ‰</title><link rel="stylesheet" href="/css/main.css"><link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link rel="icon"><!--[if lt IE 9]>
	<script src="js/ie/html5shiv.js"></script>
	<script src="js/ie/html5shiv.jsrespond.min.js"></script>
	<![endif]--></head><body><div id="wrapper"><header id="header" class="alt"><a href="/" class="logo"><strong>å¤§è¥¿ç“œ</strong> <span>ğŸ‰ ğŸ‘¶</span></a><nav><a href="#menu">èœå•</a></nav></header><nav id="menu"><ul class="links"><li><a href="/">ä¸»é¡µ</a></li><li><a href="/stories">æ•…äº‹</a></li><li><a href="/javascripts">javascript</a></li><li><a href="/pages">é¡µé¢å±•ç¤ºæ€»ç»“</a></li><li><a href="/react">react</a></li><li><a href="/vue">vue</a></li><li><a href="/svg">svg</a></li><li><a href="/config">é…ç½®æ±‡æ€»</a></li></ul><ul class="actions vertical"><li><a href="/blogs" class="button special fit">å¼€å§‹å§</a></li><li><a href="/" class="button fit">Log In</a></li></ul></nav><div id="main" class="alt"><section id="one"><div class="inner"><header class="major"><h1>vue-amapåœ¨å¾®ä¿¡å†…ç½®æµè§ˆå™¨ç¯å¢ƒçš„é—®é¢˜</h1><span>Fri, 07 Aug 2020 15:30:26</span></header><h3 id="vue-amap-ä»‹ç»">vue-amap ä»‹ç»</h3><blockquote><p><a href="https://github.com/ElemeFE/vue-amap/"><code>vue-amap</code></a>æ˜¯é¥¿äº†ä¹ˆå›¢é˜Ÿç”¨vue2.0+å°è£…çš„åœ°å›¾æ’ä»¶, ä½¿å‰ç«¯æ›´å¥½çš„ä½¿ç”¨é«˜å¾·åœ°å›¾ <a href="https://elemefe.github.io/vue-amap/#/">ğŸ‘‡æ–‡æ¡£åœ°å€</a></p></blockquote><h4 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h4><blockquote><p>åœ¨vue-routerè®¾ç½®ä¸ºhistoryæ¨¡å¼çš„æ—¶å€™, ç›´æ¥è®¿é—®éœ€è¦å®šä½çš„é¡µé¢, å¯ä»¥æ­£ç¡®çš„è·å–åˆ°å®šä½ ä½†æ˜¯å¦‚æœä½¿ç”¨<code>router.push</code>è¿›è¡Œé¡µé¢çš„è·³è½¬ä¼šå‡ºç°å®šä½æ— æ•ˆçš„æƒ…å†µ, ä½†æ˜¯ç”¨æˆ·è‚¯å®šæ˜¯é€šè¿‡å†…éƒ¨çš„é¡µé¢è·³è½¬å»è·å–åœ°å€å®šä½ä¿¡æ¯</p></blockquote><p>ä»£ç å¦‚ä¸‹:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- åœ¨vueçš„templateä¸­ä½¿ç”¨vue-amapæ’ä»¶ --&gt;</span>
&lt;<span style="color:#f92672">el-amap</span> <span style="color:#a6e22e">vid</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;amap&#34;</span> <span style="color:#a6e22e">:zoom</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;16&#34;</span> <span style="color:#a6e22e">:center</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mapCenter&#34;</span> <span style="color:#a6e22e">:plugin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;plugins&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;amap-demo&#34;</span>&gt;
  &lt;<span style="color:#f92672">el-amap-marker</span>
    <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(marker, index) in markers&#34;</span>
    <span style="color:#a6e22e">:key</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;index&#34;</span>
    <span style="color:#a6e22e">:position</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;marker.position&#34;</span>
    <span style="color:#a6e22e">:icon</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;marker.icon&#34;</span>
    <span style="color:#a6e22e">:events</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;marker.events&#34;</span>
    <span style="color:#a6e22e">:visible</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;marker.visible&#34;</span>
    <span style="color:#a6e22e">:draggable</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;marker.draggable&#34;</span>
    <span style="color:#a6e22e">clickable</span>
    <span style="color:#a6e22e">:vid</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;index&#34;</span>&gt;
  &lt;/<span style="color:#f92672">el-amap-marker</span>&gt;
&lt;/<span style="color:#f92672">el-amap</span>&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// è¿™æ˜¯è·å–å®šä½çš„æ–¹æ³•
</span><span style="color:#75715e"></span><span style="color:#a6e22e">getLocation</span>() {
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">that</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>;
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">PLUGIN</span> <span style="color:#f92672">=</span> [
    {
      <span style="color:#a6e22e">pName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Geolocation&#39;</span>,
      <span style="color:#a6e22e">events</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">init</span>(<span style="color:#a6e22e">o</span>) {
          <span style="color:#75715e">// o æ˜¯é«˜å¾·åœ°å›¾å®šä½æ’ä»¶å®ä¾‹
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">getCurrentPosition</span>((<span style="color:#a6e22e">status</span>, <span style="color:#a6e22e">result</span>) =&gt; {
            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">warn</span>(<span style="color:#e6db74">&#39;status, result&#39;</span>, <span style="color:#a6e22e">status</span>, <span style="color:#a6e22e">result</span>);
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">result</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">position</span>) {
              <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">geoLoc</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">position</span>;
              <span style="color:#75715e">// that.lat = result.position.lat;
</span><span style="color:#75715e"></span>              <span style="color:#66d9ef">const</span> {
                <span style="color:#a6e22e">street</span>, <span style="color:#a6e22e">streetNumber</span>, <span style="color:#a6e22e">province</span>, <span style="color:#a6e22e">city</span>, <span style="color:#a6e22e">district</span>,
              } <span style="color:#f92672">=</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">addressComponent</span>;
              <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">searchOption</span>.<span style="color:#a6e22e">city</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">city</span>;
              <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">defaultVal</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">province</span><span style="color:#e6db74">}${</span><span style="color:#a6e22e">city</span><span style="color:#e6db74">}${</span><span style="color:#a6e22e">district</span><span style="color:#e6db74">}${</span><span style="color:#a6e22e">street</span><span style="color:#e6db74">}${</span><span style="color:#a6e22e">streetNumber</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
              <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">mapCenter</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">geoLoc</span>.<span style="color:#a6e22e">lng</span>, <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">geoLoc</span>.<span style="color:#a6e22e">lat</span>];
              <span style="color:#75715e">// self.loaded = true;
</span><span style="color:#75715e"></span>              <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">$nextTick</span>();
            } <span style="color:#66d9ef">else</span> {
              <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">defaultVal</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;åŒ—äº¬å¸‚&#39;</span>;
            }
            <span style="color:#a6e22e">that</span>.<span style="color:#a6e22e">showLoading</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
          });
        },
      },
    },
  ];
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">plugins</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">PLUGIN</span>;
},
</code></pre></div><h4 id="è§£å†³é—®é¢˜">è§£å†³é—®é¢˜</h4><p>åœ¨é¡µé¢è·³è½¬çš„æ—¶å€™ä½¿ç”¨routerçš„resolveæ–¹æ³•è·³è½¬</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// resolveé¡µé¢è·³è½¬å¯ç”¨æ–°é¡µé¢æ‰“å¼€
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newRouter</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$router</span>.<span style="color:#a6e22e">resolve</span>({ <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;addressList&#39;</span> });
window.<span style="color:#a6e22e">open</span>(<span style="color:#a6e22e">newRouter</span>.<span style="color:#a6e22e">href</span>, <span style="color:#e6db74">&#39;_self&#39;</span>);
</code></pre></div></div></section></div><footer id="footer"><div class="inner"><ul class="icons"><li><a href="https://www.twitter.com" class="icon alt fa-twitter" target="_blank"><span class="label">Twitter</span></a></li><li><a href="https://www.facebook.com" class="icon alt fa-facebook" target="_blank"><span class="label">Facebook</span></a></li><li><a href="https://www.instagram.com" class="icon alt fa-instagram" target="_blank"><span class="label">Instagram</span></a></li><li><a href="https://www.github.com" class="icon alt fa-github" target="_blank"><span class="label">GitHub</span></a></li><li><a href="https://www.linkedin.com" class="icon alt fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li></ul><ul class="copyright"><li>&copy; Company Name</li><li>Design: <a href="https://www.html5up.net">HTML5 UP</a></li></ul></div></footer></div><script src="/js/jquery.min.js"></script><script src="/js/jquery.scrolly.min.js"></script><script src="/js/jquery.scrollex.min.js"></script><script src="/js/skel.min.js"></script><script src="/js/util.js"></script><script src="/js/vanilla-tilt.min.js"></script><script src="/js/main.js"></script></body></html>