<!DOCTYPE HTML><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="Study hard, day day up!"><meta name="author" content="å¤§è¥¿ç“œ"><meta name="generator" content="Hugo 0.66.0"><title>å¤§è¥¿ç“œğŸ‰</title><link rel="stylesheet" href="/css/main.css"><link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link rel="icon"><!--[if lt IE 9]>
	<script src="js/ie/html5shiv.js"></script>
	<script src="js/ie/html5shiv.jsrespond.min.js"></script>
	<![endif]--></head><body><div id="wrapper"><header id="header" class="alt"><a href="/" class="logo"><strong>å¤§è¥¿ç“œ</strong> <span>ğŸ‰ ğŸ‘¶</span></a><nav><a href="#menu">èœå•</a></nav></header><nav id="menu"><ul class="links"><li><a href="/">ä¸»é¡µ</a></li><li><a href="/stories">æ•…äº‹</a></li><li><a href="/javascripts">javascript</a></li><li><a href="/pages">é¡µé¢å±•ç¤ºæ€»ç»“</a></li><li><a href="/react">react</a></li><li><a href="/vue">vue</a></li><li><a href="/svg">svg</a></li><li><a href="/config">é…ç½®æ±‡æ€»</a></li></ul><ul class="actions vertical"><li><a href="/blogs" class="button special fit">å¼€å§‹å§</a></li><li><a href="/" class="button fit">Log In</a></li></ul></nav><div id="main" class="alt"><section id="one"><div class="inner"><header class="major"><h1></h1><span>Mon, 01 Jan 0001 00:00:00</span></header><hr><h2 id="draft-false">title: &ldquo;å…ƒç¼–ç¨‹äº†è§£ä¸€ä¸‹&rdquo; description: &ldquo;proxy å’Œ reflect&rdquo; slug: &ldquo;magna&rdquo; image: pic09.jpg keywords: &quot;&rdquo; categories: - &quot;&rdquo; - &quot;&rdquo; date: 2020-09-23T15:59:09-05:00 draft: false</h2><blockquote><p>ä»ECMAScript 2015 å¼€å§‹ï¼ŒJavaScript è·å¾—äº† <code>Proxy</code> å’Œ <code>Reflect</code> å¯¹è±¡çš„æ”¯æŒï¼Œå…è®¸ä½ æ‹¦æˆªå¹¶å®šä¹‰åŸºæœ¬è¯­è¨€æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆä¾‹å¦‚ï¼Œå±æ€§æŸ¥æ‰¾ï¼Œèµ‹å€¼ï¼Œæšä¸¾ï¼Œå‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚å€ŸåŠ©è¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œä½ å¯ä»¥åœ¨ JavaScript å…ƒçº§åˆ«è¿›è¡Œç¼–ç¨‹ã€‚</p></blockquote><h3 id="ä»£ç†proxy">ä»£ç†(Proxy)</h3><p>åœ¨ECMAScriptä¸­å¼•å…¥çš„Proxyå¯¹è±¡å¯ä»¥æ‹¦æˆªæŸäº›æ“ä½œå¹¶å®ç°è‡ªå®šä¹‰çš„è¡Œä¸º. ä¾‹å¦‚è·å–ä¸€ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§, å¹¶å¯¹å±æ€§è¿›è¡Œæ“çºµ.</p><h4 id="è¯­æ³•">è¯­æ³•</h4><blockquote><p>const p = new Proxy(target, handler)</p></blockquote><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// e.g 1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">handler</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">get</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">target</span>, <span style="color:#a6e22e">prop</span>) {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">msg</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">prop</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">target</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;$$$ &#39;</span><span style="color:#f92672">+</span> <span style="color:#a6e22e">prop</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; is being wrapped ! $$$&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;the prop is not in this object&#39;</span>
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">msg</span>
  }
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pxy</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Proxy({}, <span style="color:#a6e22e">handler</span>)

<span style="color:#a6e22e">pxy</span>.<span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>

<span style="color:#a6e22e">pxy</span>.<span style="color:#a6e22e">a</span>
<span style="color:#a6e22e">pxy</span>.<span style="color:#a6e22e">b</span>  <span style="color:#75715e">// the prop is not in this object
</span><span style="color:#75715e"></span>
</code></pre></div><h3 id="æ–¹æ³•ä»£ç†å¯ä»¥è½»æ¾åœ°é€šè¿‡ä¸€ä¸ªæ–°æ„é€ å‡½æ•°æ¥æ‰©å±•ä¸€ä¸ªå·²æœ‰çš„æ„é€ å‡½æ•°è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†constructå’Œapply">æ–¹æ³•ä»£ç†å¯ä»¥è½»æ¾åœ°é€šè¿‡ä¸€ä¸ªæ–°æ„é€ å‡½æ•°æ¥æ‰©å±•ä¸€ä¸ªå·²æœ‰çš„æ„é€ å‡½æ•°ã€‚è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†constructå’Œapplyã€‚</h3><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// e.g 2 é€šè¿‡æ–¹æ³•ä»£ç†å®ç°å¯¹è±¡çš„æ‰©å±•
</span><span style="color:#75715e"></span>

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">extend</span>(<span style="color:#a6e22e">sup</span>, <span style="color:#a6e22e">base</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">descriptor</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">getOwnPropertyDescriptor</span>(
    <span style="color:#a6e22e">base</span>.<span style="color:#a6e22e">prototype</span>, <span style="color:#e6db74">&#34;constructor&#34;</span>
  );
  <span style="color:#a6e22e">base</span>.<span style="color:#a6e22e">prototype</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#a6e22e">sup</span>.<span style="color:#a6e22e">prototype</span>);
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">handler</span> <span style="color:#f92672">=</span> {
    <span style="color:#a6e22e">construct</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">target</span>, <span style="color:#a6e22e">args</span>) {
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#a6e22e">base</span>.<span style="color:#a6e22e">prototype</span>);
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#a6e22e">target</span>, <span style="color:#a6e22e">obj</span>, <span style="color:#a6e22e">args</span>);
      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">obj</span>;
    },
    <span style="color:#a6e22e">apply</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">target</span>, <span style="color:#a6e22e">that</span>, <span style="color:#a6e22e">args</span>) {
      <span style="color:#a6e22e">sup</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#a6e22e">that</span>, <span style="color:#a6e22e">args</span>);
      <span style="color:#a6e22e">base</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#a6e22e">that</span>, <span style="color:#a6e22e">args</span>);
    }
  };
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">proxy</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Proxy(<span style="color:#a6e22e">base</span>, <span style="color:#a6e22e">handler</span>);
  <span style="color:#a6e22e">descriptor</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">proxy</span>;
  Object.<span style="color:#a6e22e">defineProperty</span>(<span style="color:#a6e22e">base</span>.<span style="color:#a6e22e">prototype</span>, <span style="color:#e6db74">&#34;constructor&#34;</span>, <span style="color:#a6e22e">descriptor</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">proxy</span>;
}

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">name</span>) {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>
};

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Boy</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">extend</span>(<span style="color:#a6e22e">Person</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">age</span>) {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">age</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">age</span>;
});

<span style="color:#a6e22e">Boy</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">sex</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;M&#34;</span>;

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Peter</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Boy</span>(<span style="color:#e6db74">&#34;Peter&#34;</span>, <span style="color:#ae81ff">13</span>);
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Peter</span>.<span style="color:#a6e22e">sex</span>);  <span style="color:#75715e">// &#34;M&#34;
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Peter</span>.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// &#34;Peter&#34;
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Peter</span>.<span style="color:#a6e22e">age</span>);  <span style="color:#75715e">// 13
</span><span style="color:#75715e"></span>
</code></pre></div><p>&hellip;æ­¤ç¯‡å¾…ç»­</p></div></section></div><footer id="footer"><div class="inner"><ul class="icons"><li><a href="https://www.twitter.com" class="icon alt fa-twitter" target="_blank"><span class="label">Twitter</span></a></li><li><a href="https://www.facebook.com" class="icon alt fa-facebook" target="_blank"><span class="label">Facebook</span></a></li><li><a href="https://www.instagram.com" class="icon alt fa-instagram" target="_blank"><span class="label">Instagram</span></a></li><li><a href="https://www.github.com" class="icon alt fa-github" target="_blank"><span class="label">GitHub</span></a></li><li><a href="https://www.linkedin.com" class="icon alt fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li></ul><ul class="copyright"><li>&copy; Company Name</li><li>Design: <a href="https://www.html5up.net">HTML5 UP</a></li></ul></div></footer></div><script src="/js/jquery.min.js"></script><script src="/js/jquery.scrolly.min.js"></script><script src="/js/jquery.scrollex.min.js"></script><script src="/js/skel.min.js"></script><script src="/js/util.js"></script><script src="/js/vanilla-tilt.min.js"></script><script src="/js/main.js"></script></body></html>